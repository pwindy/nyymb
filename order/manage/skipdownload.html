<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <!--如果是IE 就以标准渲染-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <!-- 视窗——————响应式布局 -->
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />

    <!--当前页面的三要素-->
    <title>运维系统-附件下载跳转</title>
    <meta name="description" content="聚能优电" />
    <meta http-equiv="keywords" content="聚能优电" />
    <!-- css -->
    <link rel="stylesheet" type="text/css" href="../../css/common/common.css" />
    <link rel="stylesheet" type="text/css" href="../../css/orderdetail.css" />
</head>

<body>
    <div id="container" class="orderdetail">
        <div id="back_btn" style="display:none;">
            点击右上角，选择在浏览器中打开
        </div>
    </div>


    <script>
        (function (win, doc) {
            var docEl = doc.documentElement || document.body; //获取HTML标签

            var container = doc.getElementById("container"); //container元素
            //判断是移动端设备还是PC,移动 就采用'orientationchange',横竖屏事件，PC端就采用onresize，窗口改变时间
            var resize =
                "onorientationchange" in win ? "orientationchange" : "resize";

            function rem() {
                docEl.style.fontSize = 100 * (container.clientWidth / 750) + "px";
            }

            //监听'DOMContent事件:DOM加载完成执行,如果DOMContent事件，那么执行rem函数
            doc.addEventListener("DOMContentLoaded", rem, false);

            //win下监听resize事件,如果resize事件，那么执行rem函数
            win.addEventListener(resize, rem, false);
        })(window, document);
    </script>
    <!-- js -->
    <script type="text/javascript" src="../../js/jquery-3.4.1.js"></script>
    <script type="text/javascript" src="../../js/swiper-3.4.2.min.js"></script>
    <script type="text/javascript" src="../../layer/layer.js"></script>
    <script>
        $(document).ready(function () {
            //从浏览器url地址中获取参数对应的值
            function GetRequest() {
                var url = location.search;//获取url中"?"符后的字符串
                var theRequest = new Object();
                if (url.indexOf("?")!=-1){ //存在？ 则
                    var str = url.substr(1);
                    strs = str.split("&"); //字符串分割
                    for(var i=0;i<strs.length;i++){
                        theRequest[strs[i].split("=")[0]]=(strs[i].split("=")[1]);
                    }
                }
                return theRequest;
            }
            //判断是否是微信浏览器
            function is_weixin() {
                var ua = window.navigator.userAgent.toLowerCase();
                if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                    console.log('微信浏览器');
                    return true;
                } else {
                    console.log(" 不是微信浏览器"); return false; 
                }
            }
            var is_weixin = is_weixin();
            if(is_weixin){ //是微信浏览器 显示返回按钮（用户可以选择下载或者返回）
                $('#back_btn').show();

            }else{ //不是微信浏览器 //执行下载
                window.location.href = GetRequest().fileurl;
                
            }
        });
    </script>

</body>

</html>